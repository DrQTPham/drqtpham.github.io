<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Test</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üß™ Simple Test</h1>
        </header>

        <main>
            <section class="card">
                <h2>Test Form</h2>
                
                <div class="form-group">
                    <label>Li·ªÅu gi·ªõi h·∫°n chu·∫©n:</label>
                    <input type="number" id="standardDoseLimit" value="45" step="0.1" />
                </div>

                <div class="form-group">
                    <label>Œ±/Œ≤:</label>
                    <input type="number" id="organAlphaBeta" value="2.0" step="0.1" />
                </div>

                <div class="form-group">
                    <label>Li·ªÅu/ph√¢n li·ªÅu m·ªõi:</label>
                    <input type="number" id="newDosePerFraction" value="3.0" step="0.1" />
                </div>

                <button class="btn btn-primary" id="calcBtn">T√≠nh to√°n</button>

                <div id="organLimitResults" style="margin-top: 20px;"></div>
            </section>
        </main>
    </div>

    <script>
        console.log('Simple test page loaded');
        
        document.getElementById('calcBtn').addEventListener('click', function() {
            console.log('Button clicked!');
            
            const standardLimit = parseFloat(document.getElementById('standardDoseLimit').value);
            const organAlphaBeta = parseFloat(document.getElementById('organAlphaBeta').value);
            const newDosePerFraction = parseFloat(document.getElementById('newDosePerFraction').value);
            
            console.log('Values:', { standardLimit, organAlphaBeta, newDosePerFraction });
            
            if (!standardLimit || !organAlphaBeta || !newDosePerFraction) {
                alert('Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin');
                return;
            }
            
            // Calculate
            const dStandard = 2.0;
            const bedStandard = standardLimit * (1 + dStandard / organAlphaBeta);
            const dNew = newDosePerFraction;
            const newTotalDoseLimit = bedStandard / (1 + dNew / organAlphaBeta);
            const newNumFractions = Math.floor(newTotalDoseLimit / dNew);
            const actualTotalDose = newNumFractions * dNew;
            const actualBED = actualTotalDose * (1 + dNew / organAlphaBeta);
            const safetyMargin = ((bedStandard - actualBED) / bedStandard * 100);
            
            console.log('Calculated:', {
                bedStandard,
                newTotalDoseLimit,
                newNumFractions,
                actualTotalDose,
                actualBED,
                safetyMargin
            });
            
            // Display
            const resultsDiv = document.getElementById('organLimitResults');
            
            const html = `
                <div class="alert alert-success">
                    <h3>‚úÖ K·∫øt qu·∫£</h3>
                    <p><strong>BED chu·∫©n:</strong> ${bedStandard.toFixed(2)} Gy</p>
                    <p><strong>Li·ªÅu m·ªõi:</strong> ${actualTotalDose.toFixed(1)} Gy (${newNumFractions} ph√¢n li·ªÅu)</p>
                    <p><strong>BED m·ªõi:</strong> ${actualBED.toFixed(2)} Gy</p>
                    <p><strong>Margin:</strong> ${safetyMargin.toFixed(1)}%</p>
                </div>
            `;
            
            resultsDiv.innerHTML = html;
            resultsDiv.style.display = 'block';
            
            console.log('Results displayed!');
        });
    </script>
</body>
</html>
