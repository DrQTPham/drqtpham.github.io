# HÆ°á»›ng Dáº«n Nháº­p Sá»‘ Tháº­p PhÃ¢n

## ğŸ¯ TÃ­nh NÄƒng Má»›i: Há»— Trá»£ Cáº£ Dáº¥u Pháº©y vÃ  Dáº¥u Cháº¥m

á»¨ng dá»¥ng EQD2 & BED Calculator hiá»‡n Ä‘Ã£ há»— trá»£ nháº­p sá»‘ tháº­p phÃ¢n vá»›i **Cáº¢ HAI** Ä‘á»‹nh dáº¡ng:

### âœ… Äá»‹nh dáº¡ng Ä‘Æ°á»£c há»— trá»£:

| Äá»‹nh dáº¡ng | VÃ­ dá»¥ | Khu vá»±c sá»­ dá»¥ng |
|-----------|-------|-----------------|
| **Dáº¥u cháº¥m (.)** | `2.5` | Má»¹, Anh, Ãšc, ChÃ¢u Ã |
| **Dáº¥u pháº©y (,)** | `2,5` | Viá»‡t Nam, ChÃ¢u Ã‚u, Nam Má»¹ |

---

## ğŸš€ CÃ¡ch Sá»­ Dá»¥ng

### 1. Nháº­p vá»›i dáº¥u cháº¥m (.)
```
Tá»‘c Ä‘á»™ tÃ¡i sinh: 0.7
Tá»•ng liá»u: 70.5
Liá»u/phÃ¢n liá»u: 2.5
```

### 2. Nháº­p vá»›i dáº¥u pháº©y (,)
```
Tá»‘c Ä‘á»™ tÃ¡i sinh: 0,7
Tá»•ng liá»u: 70,5
Liá»u/phÃ¢n liá»u: 2,5
```

**Cáº£ hai cÃ¡ch Ä‘á»u hoáº¡t Ä‘á»™ng!** Há»‡ thá»‘ng tá»± Ä‘á»™ng chuyá»ƒn Ä‘á»•i.

---

## ğŸ’¡ TÃ­nh NÄƒng Tá»± Äá»™ng

### Chuyá»ƒn Ä‘á»•i tá»± Ä‘á»™ng
Khi báº¡n nháº­p sá»‘ vá»›i dáº¥u pháº©y vÃ  rá»i khá»i Ã´ nháº­p (blur), há»‡ thá»‘ng sáº½:
1. âœ… Tá»± Ä‘á»™ng chuyá»ƒn dáº¥u pháº©y (,) thÃ nh dáº¥u cháº¥m (.)
2. âœ… Hiá»ƒn thá»‹ thÃ´ng bÃ¡o nhá»: "âœ“ ÄÃ£ chuyá»ƒn , â†’ ."
3. âœ… TÃ­nh toÃ¡n chÃ­nh xÃ¡c

### VÃ­ dá»¥:
```
Báº¡n nháº­p:  2,5
Há»‡ thá»‘ng chuyá»ƒn thÃ nh: 2.5
Káº¿t quáº£: âœ“ ÄÃ£ chuyá»ƒn , â†’ .
```

---

## ğŸ”§ Ãp Dá»¥ng Cho Táº¥t Cáº£ Input

TÃ­nh nÄƒng nÃ y hoáº¡t Ä‘á»™ng vá»›i **Táº¤T Cáº¢** Ã´ nháº­p sá»‘ trong á»©ng dá»¥ng:

### 1. TÃ­nh BED & EQD2
- Tá»•ng liá»u (D)
- Liá»u/phÃ¢n liá»u (d)
- Î±/Î²

### 2. TÃ­nh bÃ¹ liá»u Gap
- Tá»‘c Ä‘á»™ tÃ¡i sinh
- Tá»•ng liá»u ban Ä‘áº§u

### 3. Tra cá»©u Organ Dose
- Liá»u giá»›i háº¡n chuáº©n
- Î±/Î² cÆ¡ quan
- Liá»u/phÃ¢n liá»u má»›i

### 4. TÃ­nh ngÆ°á»£c EQD2
- EQD2 má»¥c tiÃªu
- Liá»u/phÃ¢n liá»u
- Î±/Î²

---

## ğŸ“± TÆ°Æ¡ng ThÃ­ch

### Desktop
- âœ… Chrome, Firefox, Safari, Edge
- âœ… Tá»± Ä‘á»™ng chuyá»ƒn Ä‘á»•i khi blur
- âœ… Hiá»ƒn thá»‹ tooltip

### Mobile
- âœ… iOS Safari
- âœ… Android Chrome
- âœ… BÃ n phÃ­m sá»‘ há»— trá»£ cáº£ , vÃ  .

---

## ğŸ¨ Tráº£i Nghiá»‡m NgÆ°á»i DÃ¹ng

### Khi nháº­p vá»›i dáº¥u pháº©y:
1. Báº¡n nháº­p: `2,5`
2. Click ra ngoÃ i Ã´ nháº­p
3. Tháº¥y tooltip xanh: **"âœ“ ÄÃ£ chuyá»ƒn , â†’ ."**
4. GiÃ¡ trá»‹ tá»± Ä‘á»™ng Ä‘á»•i thÃ nh: `2.5`
5. TÃ­nh toÃ¡n chÃ­nh xÃ¡c!

### KhÃ´ng cáº§n lo láº¯ng:
- âŒ KhÃ´ng cáº§n nhá»› pháº£i dÃ¹ng dáº¥u gÃ¬
- âŒ KhÃ´ng bá»‹ lá»—i "NaN" (Not a Number)
- âŒ KhÃ´ng cáº§n sá»­a láº¡i input
- âœ… Nháº­p tá»± nhiÃªn theo thÃ³i quen!

---

## ğŸ” Ká»¹ Thuáº­t

### CÃ¡ch hoáº¡t Ä‘á»™ng:
```javascript
// HÃ m normalize
function normalizeDecimalInput(value) {
    return value.replace(/,/g, '.');
}

// Parse linh hoáº¡t
function parseFloatFlexible(value) {
    const normalized = normalizeDecimalInput(value);
    return parseFloat(normalized);
}
```

### Event listeners:
- **blur**: Tá»± Ä‘á»™ng chuyá»ƒn Ä‘á»•i khi rá»i khá»i Ã´
- **keypress**: Cho phÃ©p nháº­p dáº¥u pháº©y
- **DOMContentLoaded**: Khá»Ÿi táº¡o cho táº¥t cáº£ input

---

## ğŸ“Š VÃ­ Dá»¥ Thá»±c Táº¿

### Case 1: TÃ­nh bÃ¹ liá»u
```
Input (vá»›i dáº¥u pháº©y):
- Tá»‘c Ä‘á»™ tÃ¡i sinh: 0,7
- Sá»‘ ngÃ y giÃ¡n Ä‘oáº¡n: 5
- Tá»•ng liá»u: 70,0
- Sá»‘ phÃ¢n liá»u: 35

Káº¿t quáº£:
âœ“ Táº¥t cáº£ Ä‘Æ°á»£c chuyá»ƒn Ä‘á»•i tá»± Ä‘á»™ng
âœ“ TÃ­nh toÃ¡n chÃ­nh xÃ¡c: Liá»u bÃ¹ = 3.5 Gy
```

### Case 2: TÃ­nh EQD2
```
Input (vá»›i dáº¥u pháº©y):
- Tá»•ng liá»u: 60,0
- Sá»‘ phÃ¢n liá»u: 30
- Î±/Î²: 10,0

Káº¿t quáº£:
âœ“ EQD2 = 60.00 Gy
âœ“ BED = 120.00 Gy
```

---

## âš ï¸ LÆ°u Ã

### KhÃ´ng há»— trá»£:
- âŒ Nhiá»u dáº¥u pháº©y: `2,5,0` (khÃ´ng há»£p lá»‡)
- âŒ Dáº¥u pháº©y lÃ m phÃ¢n cÃ¡ch nghÃ¬n: `1,000` (sáº½ thÃ nh 1.000)

### Khuyáº¿n nghá»‹:
- âœ… DÃ¹ng dáº¥u pháº©y CHá»ˆ cho tháº­p phÃ¢n
- âœ… KhÃ´ng dÃ¹ng dáº¥u phÃ¢n cÃ¡ch nghÃ¬n
- âœ… VÃ­ dá»¥ Ä‘Ãºng: `2,5` hoáº·c `2.5`
- âœ… VÃ­ dá»¥ sai: `1,000` (nÃªn viáº¿t `1000`)

---

## ğŸ“ Táº¡i Sao Cáº§n TÃ­nh NÄƒng NÃ y?

### Váº¥n Ä‘á»:
- NgÆ°á»i Viá»‡t Nam quen dÃ¹ng dáº¥u pháº©y: `2,5`
- JavaScript chá»‰ hiá»ƒu dáº¥u cháº¥m: `2.5`
- Nháº­p sai â†’ Lá»—i NaN â†’ KhÃ´ng tÃ­nh Ä‘Æ°á»£c

### Giáº£i phÃ¡p:
- âœ… Tá»± Ä‘á»™ng chuyá»ƒn Ä‘á»•i
- âœ… Há»— trá»£ cáº£ hai Ä‘á»‹nh dáº¡ng
- âœ… Tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng tá»‘t hÆ¡n
- âœ… Giáº£m lá»—i nháº­p liá»‡u

---

## ğŸ“š TÃ i Liá»‡u Ká»¹ Thuáº­t

### File liÃªn quan:
- `js/input-normalizer.js` - Logic chuyá»ƒn Ä‘á»•i
- `js/app.js` - Sá»­ dá»¥ng parseFloatFlexible
- `index.html` - Load script

### Functions:
- `normalizeDecimalInput(value)` - Chuyá»ƒn , â†’ .
- `parseFloatFlexible(value)` - Parse float linh hoáº¡t
- `parseIntFlexible(value)` - Parse int linh hoáº¡t
- `showDecimalHint(element)` - Hiá»ƒn thá»‹ tooltip

---

## ğŸš€ Cáº­p Nháº­t

**Version 2.2** - Decimal Input Support
- âœ… Há»— trá»£ dáº¥u pháº©y vÃ  dáº¥u cháº¥m
- âœ… Tá»± Ä‘á»™ng chuyá»ƒn Ä‘á»•i
- âœ… Tooltip thÃ´ng bÃ¡o
- âœ… Ãp dá»¥ng toÃ n bá»™ á»©ng dá»¥ng

---

**Â© 2025 EQD2 & BED Calculator**  
**PhÃ¡t triá»ƒn bá»Ÿi Dr. Q.T. Pháº¡m**  
ğŸ“§ qtphamhus@gmail.com
